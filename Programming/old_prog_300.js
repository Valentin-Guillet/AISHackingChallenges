
const bigram_freq = {"th": 25.33, "he": 25.18, "in": 24.95, "er": 24.77, "an": 24.74, "re": 24.67, "on": 24.62, "at": 24.45, "en": 24.43, "nd": 24.36, "ti": 24.35, "es": 24.35, "or": 24.30, "te": 24.24, "of": 24.22, "ed": 24.21, "is": 24.18, "it": 24.17, "al": 24.14, "ar": 24.13, "st": 24.11, "to": 24.10, "nt": 24.10, "ng": 24.01, "se": 23.99, "ha": 23.98, "as": 23.92, "ou": 23.92, "io": 23.88, "le": 23.87, "ve": 23.87, "co": 23.83, "me": 23.83, "de": 23.79, "hi": 23.79, "ri": 23.74, "ro": 23.74, "ic": 23.70, "ne": 23.69, "ea": 23.68, "ra": 23.68, "ce": 23.63, "li": 23.59, "ch": 23.54, "ll": 23.51, "be": 23.51, "ma": 23.49, "si": 23.46, "om": 23.45, "ur": 23.45, "ca": 23.44, "el": 23.42, "ta": 23.42, "la": 23.42, "ns": 23.38, "di": 23.35, "fo": 23.34, "ho": 23.33, "pe": 23.32, "ec": 23.32, "pr": 23.31, "no": 23.29, "ct": 23.28, "us": 23.27, "ac": 23.25, "ot": 23.24, "il": 23.22, "tr": 23.20, "ly": 23.20, "nc": 23.18, "et": 23.17, "ut": 23.15, "ss": 23.15, "so": 23.14, "rs": 23.13, "un": 23.13, "lo": 23.11, "wa": 23.10, "ge": 23.10, "ie": 23.10, "wh": 23.09, "ee": 23.08, "wi": 23.08, "em": 23.07, "ad": 23.06, "ol": 23.05, "rt": 23.04, "po": 23.04, "we": 23.04, "na": 23.00, "ul": 23.00, "ni": 22.98, "ts": 22.97, "mo": 22.97, "ow": 22.95, "pa": 22.93, "im": 22.91, "mi": 22.91, "ai": 22.91, "sh": 22.90, "ir": 22.90, "su": 22.89, "id": 22.84, "os": 22.82, "iv": 22.81, "ia": 22.81, "am": 22.80, "fi": 22.80, "ci": 22.79, "vi": 22.75, "pl": 22.72, "ig": 22.69, "tu": 22.69, "ev": 22.69, "ld": 22.68, "ry": 22.66, "mp": 22.63, "fe": 22.62, "bl": 22.60, "ab": 22.59, "gh": 22.58, "ty": 22.58, "op": 22.56, "wo": 22.55, "sa": 22.53, "ay": 22.53, "ex": 22.52, "ke": 22.51, "fr": 22.51, "oo": 22.50, "av": 22.47, "ag": 22.47, "if": 22.46, "ap": 22.46, "gr": 22.43, "od": 22.43, "bo": 22.42, "sp": 22.40, "rd": 22.39, "do": 22.39, "uc": 22.38, "bu": 22.37, "ei": 22.36, "ov": 22.33, "by": 22.32, "rm": 22.32, "ep": 22.29, "tt": 22.29, "oc": 22.26, "fa": 22.25, "ef": 22.24, "cu": 22.24, "rn": 22.23, "sc": 22.19, "gi": 22.17, "da": 22.17, "yo": 22.16, "cr": 22.16, "cl": 22.15, "du": 22.15, "ga": 22.15, "qu": 22.14, "ue": 22.14, "ff": 22.14, "ba": 22.13, "ey": 22.12, "ls": 22.10, "va": 22.09, "um": 22.08, "pp": 22.07, "ua": 22.06, "up": 22.06, "lu": 22.06, "go": 22.03, "ht": 22.02, "ru": 22.00, "ug": 22.00, "ds": 21.99, "lt": 21.97, "pi": 21.96, "rc": 21.95, "rr": 21.94, "eg": 21.93, "au": 21.93, "ck": 21.92, "ew": 21.91, "mu": 21.89, "br": 21.86, "bi": 21.82, "pt": 21.81, "ak": 21.80, "pu": 21.80, "ui": 21.77, "rg": 21.75, "ib": 21.74, "tl": 21.74, "ny": 21.73, "ki": 21.73, "rk": 21.72, "ys": 21.72, "ob": 21.72, "mm": 21.71, "fu": 21.71, "ph": 21.70, "og": 21.69, "ms": 21.68, "ye": 21.68, "ud": 21.66, "mb": 21.65, "ip": 21.64, "ub": 21.63, "oi": 21.62, "rl": 21.61, "gu": 21.60, "dr": 21.60, "hr": 21.59, "cc": 21.57, "tw": 21.56, "ft": 21.55, "wn": 21.52, "nu": 21.51, "af": 21.46, "hu": 21.45, "nn": 21.44, "eo": 21.43, "vo": 21.41, "rv": 21.39, "nf": 21.36, "xp": 21.35, "gn": 21.33, "sm": 21.33, "fl": 21.32, "iz": 21.31, "ok": 21.31, "nl": 21.31, "my": 21.28, "gl": 21.25, "aw": 21.24, "ju": 21.22, "oa": 21.20, "eq": 21.20, "sy": 21.19, "sl": 21.17, "ps": 21.15, "jo": 21.13, "lf": 21.13, "nv": 21.10, "je": 21.10, "nk": 21.09, "kn": 21.09, "gs": 21.09, "dy": 21.07, "hy": 21.06, "ze": 21.06, "ks": 21.01, "xt": 20.99, "bs": 20.97, "ik": 20.91, "dd": 20.91, "cy": 20.88, "rp": 20.88, "sk": 20.83, "xi": 20.82, "oe": 20.80, "oy": 20.74, "ws": 20.71, "lv": 20.70, "dl": 20.63, "rf": 20.62, "eu": 20.59, "dg": 20.58, "wr": 20.58, "xa": 20.54, "yi": 20.51, "nm": 20.47, "eb": 20.45, "rb": 20.43, "tm": 20.43, "xc": 20.43, "eh": 20.42, "tc": 20.41, "gy": 20.41, "ja": 20.40, "hn": 20.40, "yp": 20.37, "za": 20.36, "gg": 20.36, "ym": 20.31, "sw": 20.31, "bj": 20.29, "lm": 20.29, "cs": 20.28, "ii": 20.28, "ix": 20.24, "xe": 20.23, "oh": 20.21, "lk": 20.13, "dv": 20.10, "lp": 20.10, "ax": 20.09, "ox": 20.07, "uf": 20.07, "dm": 20.05, "iu": 20.01, "sf": 19.99, "bt": 19.99, "ka": 19.98, "yt": 19.96, "ek": 19.95, "pm": 19.92, "ya": 19.91, "gt": 19.88, "wl": 19.87, "rh": 19.87, "yl": 19.84, "hs": 19.84, "ah": 19.76, "yc": 19.75, "yn": 19.73, "rw": 19.70, "hm": 19.69, "lw": 19.69, "hl": 19.68, "ae": 19.67, "zi": 19.64, "az": 19.62, "lc": 19.62, "py": 19.61, "aj": 19.61, "iq": 19.57, "nj": 19.56, "bb": 19.54, "nh": 19.54, "uo": 19.52, "kl": 19.51, "lr": 19.46, "tn": 19.45, "gm": 19.44, "sn": 19.37, "nr": 19.36, "fy": 19.36, "mn": 19.32, "dw": 19.25, "sb": 19.22, "yr": 19.20, "dn": 19.17, "sq": 19.16, "zo": 19.12, "oj": 19.09, "yd": 19.07, "lb": 19.05, "wt": 19.03, "lg": 18.96, "ko": 18.95, "np": 18.95, "sr": 18.94, "nq": 18.93, "ky": 18.93, "ln": 18.92, "nw": 18.91, "tf": 18.88, "fs": 18.86, "cq": 18.85, "dh": 18.84, "sd": 18.81, "vy": 18.74, "dj": 18.71, "hw": 18.71, "xu": 18.71, "ao": 18.68, "ml": 18.68, "uk": 18.68, "uy": 18.67, "ej": 18.66, "ez": 18.66, "hb": 18.63, "nz": 18.62, "nb": 18.62, "mc": 18.61, "yb": 18.61, "tp": 18.61, "xh": 18.58, "ux": 18.52, "tz": 18.50, "bv": 18.50, "mf": 18.49, "wd": 18.41, "oz": 18.39, "yw": 18.37, "kh": 18.31, "gd": 18.30, "bm": 18.29, "mr": 18.28, "ku": 18.26, "uv": 18.22, "dt": 18.21, "hd": 18.20, "aa": 18.19, "xx": 18.18, "df": 18.17, "db": 18.17, "ji": 18.17, "kr": 18.15, "xo": 18.14, "cm": 18.13, "zz": 18.13, "nx": 18.11, "yg": 18.10, "xy": 18.10, "kg": 18.09, "tb": 18.08, "dc": 18.07, "bd": 18.06, "sg": 18.05, "wy": 18.04, "zy": 18.01, "aq": 17.96, "hf": 17.96, "cd": 17.95, "vu": 17.94, "kw": 17.93, "zu": 17.92, "bn": 17.89, "ih": 17.89, "tg": 17.83, "xv": 17.82, "uz": 17.80, "bc": 17.79, "xf": 17.77, "yz": 17.74, "km": 17.73, "dp": 17.70, "lh": 17.63, "wf": 17.62, "kf": 17.61, "pf": 17.52, "cf": 17.49, "mt": 17.46, "yu": 17.43, "cp": 17.42, "pb": 17.42, "td": 17.41, "zl": 17.38, "sv": 17.37, "hc": 17.36, "mg": 17.35, "pw": 17.34, "gf": 17.34, "pd": 17.33, "pn": 17.32, "pc": 17.31, "rx": 17.31, "tv": 17.30, "ij": 17.25, "wm": 17.24, "uh": 17.21, "wk": 17.21, "wb": 17.21, "bh": 17.20, "oq": 17.19, "kt": 17.18, "rq": 17.15, "kb": 17.05, "cg": 17.03, "vr": 17.02, "cn": 17.00, "pk": 16.95, "uu": 16.90, "yf": 16.87, "wp": 16.85, "cz": 16.84, "kp": 16.83, "dq": 16.80, "wu": 16.79, "fm": 16.77, "wc": 16.76, "md": 16.75, "kd": 16.75, "zh": 16.74, "gw": 16.72, "rz": 16.70, "cb": 16.69, "iw": 16.68, "xl": 16.63, "hp": 16.63, "mw": 16.61, "vs": 16.60, "fc": 16.60, "rj": 16.56, "bp": 16.55, "mh": 16.52, "hh": 16.50, "yh": 16.50, "uj": 16.49, "fg": 16.48, "fd": 16.45, "gb": 16.45, "pg": 16.40, "tk": 16.38, "kk": 16.36, "hq": 16.29, "fn": 16.28, "lz": 16.28, "vl": 16.26, "gp": 16.26, "hz": 16.18, "dk": 16.06, "yk": 16.04, "qi": 16.00, "lx": 15.96, "vd": 15.94, "zs": 15.94, "bw": 15.93, "xq": 15.92, "mv": 15.91, "uw": 15.87, "hg": 15.86, "fb": 15.86, "sj": 15.84, "ww": 15.81, "gk": 15.80, "uq": 15.79, "bg": 15.79, "sz": 15.76, "jr": 15.73, "ql": 15.71, "zt": 15.70, "hk": 15.70, "vc": 15.69, "xm": 15.69, "gc": 15.68, "fw": 15.67, "pz": 15.66, "kc": 15.66, "hv": 15.65, "xw": 15.65, "zw": 15.65, "fp": 15.65, "iy": 15.64, "pv": 15.64, "vt": 15.63, "jp": 15.62, "cv": 15.58, "zb": 15.58, "vp": 15.52, "zr": 15.48, "fh": 15.45, "yv": 15.44, "zg": 15.36, "zm": 15.36, "zv": 15.34, "qs": 15.30, "kv": 15.30, "vn": 15.27, "zn": 15.27, "qa": 15.27, "yx": 15.25, "jn": 15.23, "bf": 15.22, "mk": 15.19, "cw": 15.17, "jm": 15.11, "lq": 15.09, "jh": 15.08, "kj": 15.06, "jc": 15.05, "gz": 15.04, "js": 15.01, "tx": 15.01, "fk": 15.00, "jl": 14.97, "vm": 14.97, "lj": 14.96, "tj": 14.96, "jj": 14.90, "cj": 14.90, "vg": 14.90, "mj": 14.88, "jt": 14.88, "pj": 14.84, "wg": 14.82, "vh": 14.80, "bk": 14.78, "vv": 14.77, "jd": 14.77, "tq": 14.73, "vb": 14.73, "jf": 14.70, "dz": 14.60, "xb": 14.58, "jb": 14.56, "zc": 14.55, "fj": 14.54, "yy": 14.50, "qn": 14.43, "xs": 14.40, "qr": 14.37, "jk": 14.36, "jv": 14.35, "qq": 14.35, "xn": 14.29, "vf": 14.25, "px": 14.20, "zd": 14.16, "qt": 14.14, "zp": 14.12, "qo": 14.09, "dx": 14.07, "hj": 14.06, "gv": 13.99, "jw": 13.96, "qc": 13.93, "jy": 13.92, "gj": 13.90, "qb": 13.89, "pq": 13.88, "jg": 13.84, "bz": 13.82, "mx": 13.80, "qm": 13.80, "mz": 13.78, "qf": 13.76, "wj": 13.72, "zq": 13.72, "xr": 13.71, "zk": 13.71, "cx": 13.68, "fx": 13.60, "fv": 13.60, "bx": 13.56, "vw": 13.51, "vj": 13.49, "mq": 13.47, "qv": 13.36, "zf": 13.31, "qe": 13.25, "yj": 13.23, "gx": 13.23, "kx": 13.22, "xg": 13.20, "qd": 13.16, "xj": 13.14, "sx": 13.12, "vz": 13.12, "vx": 13.01, "wv": 12.87, "yq": 12.86, "bq": 12.75, "gq": 12.75, "vk": 12.72, "zj": 12.64, "xk": 12.54, "qp": 12.51, "hx": 12.48, "fz": 12.48, "qh": 12.48, "qj": 12.37, "jz": 12.30, "vq": 12.26, "kq": 12.14, "xd": 12.03, "qw": 12.00, "jx": 11.99, "qx": 11.97, "kz": 11.92, "wx": 11.92, "fq": 11.91, "xz": 11.82, "zx": 11.59, "jq": -2000, "qg": -2000, "qk": -2000, "qy": -2000, "qz": -2000, "wq": -2000, "wz": -2000 }

function is_letter(chr) {
    return ('a' <= chr && chr <= 'z');
}

function rot(i, chr) {
    if (!is_letter(chr)) {
        return chr;
    }
    return String.fromCharCode((chr.charCodeAt() - 97 + i) % 26 + 97);
}

function get_english_score(msg) {
    let score = 0;
    for (let i = 0; i < msg.length - 1; i++) {
        if (is_letter(msg[i]) && is_letter(msg[i + 1])) {
            score += bigram_freq[msg.substr(i, 2)];
        }
    }
    return score;
}

async function main() {
    for (let i = 0; i < 50; i++) {
        console.log("Solving message " + i);
        let secret = SuperRot_getEncryptedMessage();

        let found = false;
        let max_score = -1;
        let final_msg = null;
        for (let j = 0; j < 26; j++) {
            let decoded = secret.split("")
                                .map(rot.bind(undefined, j))
                                .join("");

            let score = get_english_score(decoded);
            if (score > max_score) {
                max_score = score;
                final_msg = decoded;
            }
        }

        if (max_score > -1) {
            let ans = await SuperRot_submit(final_msg);
            if (!ans) {
                console.log(`ERROR!\nSecret: ${secret}\nDecoded: ${final_msg}`)
                return false;
            }
        } else {
            console.log(`Not found! ${secret}`);
            return false;
        }
    }

    return true;
}

await main()
